{"version":3,"sources":["App.js","instructor_data_view.js","index.js"],"names":["Question","props","react_default","a","createElement","className","question","onSubmit","Form_default","Control","type","value","answer","onChange","Button_default","variant","size","block","onClick","goBack","Story","context","story","WordAlert","word_alert","Alert_default","Study","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","contexts","questions","context_number","question_number","answers","finished","start","textInput","views","show_story","fetch","json","setState","console","log","_context","t0","data","student_responses","JSON","stringify","method","body","headers","Content-type","then","res","response","catch","err","e","target","word_limit","trim","split","length","preventDefault","slice","validateSubmission","text","push","_this2","handleStartClick","postData","toggleStory","handleFormChange","handleSubmit","React","Component","InstructorPage","map","item","key","id","routing","react_router_dom","react_router","path","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0fe5631a.chunk.js","sourcesContent":["import React from 'react';\r\nimport './App.css';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Alert from 'react-bootstrap/Alert';\r\n\r\n// const list = [\r\n//     {\r\n//         id: 0,\r\n//         story: 'Baby shoes. Never worn.',\r\n//         contexts: ['This is an ad.', 'This is a story.'],\r\n//         questions: [\r\n//             {\r\n//                 text: 'In one word or less, how did this make you feel?',\r\n//                 word_limit: 1,\r\n//             },\r\n//             {\r\n//                 text: 'In three words or less, what is this story about?',\r\n//                 word_limit: 3,\r\n//             },\r\n//         ],\r\n//     },\r\n// ];\r\n\r\nfunction Question(props) {\r\n    return (\r\n        <div className={'question'}>\r\n            <div className={'question-prompt'}>{props.question}</div>\r\n            <form onSubmit={props.onSubmit}>\r\n                <label>\r\n                    <Form.Control type={'text'} value={props.answer} onChange={props.onChange} />\r\n                </label>\r\n                <div>\r\n                    <Button variant='primary' type='submit' size='lg' block>Continue</Button>\r\n                </div>\r\n            </form>\r\n            <Button variant='secondary' onClick={props.goBack} size='lg' block>Go back to story</Button>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction Story(props) {\r\n    return (\r\n        <div className='story'>\r\n            <div className={'context-text'}>{props.context}</div>\r\n            <div className={'story-text'}>{props.story}</div>\r\n            <Button variant='secondary' onClick={props.onClick} size='lg' block>Continue</Button>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction WordAlert(props) {\r\n\r\n    if (props.word_alert) {\r\n        return (\r\n            <div className='word-alert'>\r\n                <Alert variant='danger'>\r\n                    Please make sure to enter a response and respect word limits\r\n                </Alert>\r\n            </div>\r\n        );\r\n    } else {\r\n        return null;\r\n    }\r\n}\r\n\r\nclass Study extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            story: null,\r\n            contexts: [],\r\n            questions: [],\r\n            context_number: 0,\r\n            question_number: 0,\r\n            answers: [],\r\n            finished: false,\r\n            start: true,\r\n            textInput: '',\r\n            views: 0,\r\n            show_story: true,\r\n            word_alert: false,\r\n        };\r\n\r\n    }\r\n\r\n    async componentDidMount() {\r\n        // Load from server\r\n\r\n        try {\r\n            const questions = await fetch('http://localhost:8000/api/');\r\n            const json = await questions.json();\r\n            this.setState(json[0]);\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n\r\n        // this.setState(list[0])\r\n    }\r\n\r\n    postData() {\r\n        const url = 'http://localhost:8000/api/add-response/';\r\n        const data = {\r\n            story: this.state.story,\r\n            student_responses: this.state.answers,\r\n        };\r\n\r\n        console.log(JSON.stringify(data));\r\n\r\n        fetch(url, {\r\n            method: 'POST',\r\n            body: JSON.stringify(data),\r\n            headers: {\r\n                'Content-type': 'application/json'\r\n            }\r\n\r\n        }).then(res => res.json()).then(response => console.log(JSON.stringify(response)))\r\n            .catch(err => console.log(err));\r\n    }\r\n\r\n    handleFormChange(e) {\r\n        this.setState({textInput: e.target.value});\r\n    }\r\n\r\n    validateSubmission(response, word_limit) {\r\n        if (!response) {\r\n            return false;\r\n        } else {\r\n            const response_list = response.trim().split(' ');\r\n            if (!(response_list.length <= word_limit)) {\r\n                return false;\r\n            } \r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n\r\n    handleSubmit(e) {\r\n        e.preventDefault();\r\n        let question_number = this.state.question_number;\r\n        let context_number = this.state.context_number;\r\n        const answers = this.state.answers.slice();\r\n        const response = this.state.textInput;\r\n        let views = this.state.views;\r\n        const word_limit = this.state.questions[question_number].word_limit;\r\n        let finished = this.state.finished;\r\n        let show_story = this.state.show_story;\r\n\r\n        const isValid = this.validateSubmission(response, word_limit);\r\n        if (!isValid) {\r\n            this.setState({word_alert: true,});\r\n            return;\r\n        }\r\n\r\n        // answers[context_number][question_number] = response;\r\n        const answer = {\r\n            'context': this.state.contexts[context_number],\r\n            'question': this.state.questions[question_number].text,\r\n            response,\r\n            views,\r\n        };\r\n        answers.push(answer);\r\n        views = 0;\r\n\r\n        if (question_number < this.state.questions.length - 1) {\r\n            question_number += 1;\r\n\r\n        } else { // we're at the last question\r\n            if (context_number < this.state.contexts.length - 1) {\r\n                context_number += 1;\r\n                question_number = 0;\r\n                show_story = true;\r\n            } else { // we're at the last context\r\n                finished = true;\r\n            }\r\n        } \r\n\r\n        this.setState({\r\n            question_number,\r\n            context_number,\r\n            answers,\r\n            finished,\r\n            textInput: '',\r\n            show_story,\r\n            views,\r\n            word_alert: false,\r\n        });\r\n    }\r\n\r\n    handleStartClick() {\r\n        this.setState({start: false,})\r\n    }\r\n\r\n    toggleStory() {\r\n        const show_story = !this.state.show_story;\r\n        let views = this.state.views;\r\n        if (show_story) {\r\n            views++;\r\n        }\r\n        this.setState({\r\n            show_story,\r\n            views,\r\n        });\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n\r\n        let response;\r\n\r\n        if (this.state.story) {\r\n            if (this.state.start) {\r\n                response = (\r\n                    <div className={'start'}>\r\n                        <div>Are you ready?</div>\r\n                        <Button variant='secondary' onClick={() => this.handleStartClick()} size='lg' block>\r\n                            Start!\r\n                        </Button>\r\n                    </div>\r\n\r\n                );\r\n\r\n            } else if (!this.state.finished) {\r\n                if (this.state.show_story) {\r\n                    response = (<Story\r\n                        story={this.state.story}\r\n                        context={this.state.contexts[this.state.context_number]}\r\n                        onClick={() => this.toggleStory()}\r\n                    />);\r\n                } else {\r\n                    response = (\r\n                        <div>\r\n                            <div><WordAlert word_alert={this.state.word_alert} /></div>\r\n                            <div>\r\n                                <Question\r\n                                    story={this.state.story}\r\n                                    context={this.state.contexts[this.state.context_number]}\r\n                                    question={this.state.questions[this.state.question_number]['text']}\r\n                                    onChange={(e) => this.handleFormChange(e)}\r\n                                    onSubmit={(e) => this.handleSubmit(e)}\r\n                                    answer={this.state.textInput}\r\n                                    goBack={() => this.toggleStory()}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                }\r\n            } else {\r\n                this.postData();\r\n                response = <div className={'finished'}>\r\n                    Thank you for your time!\r\n                </div>;\r\n            }\r\n        } else {\r\n            response = null;\r\n        }\r\n\r\n        return response;\r\n    }\r\n}\r\n\r\nexport default Study;\r\n\r\n","import React from 'react'\r\nimport './index.css';\r\n\r\nfunction Responses(props) {\r\n\r\n}\r\n\r\nclass InstructorPage extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            data: [],\r\n        };\r\n    }\r\n\r\n    async componentDidMount() {\r\n        try {\r\n            const res = await fetch('http://127.0.0.1:8000/api/add-response');\r\n            const data = await res.json();\r\n            this.setState({\r\n                data\r\n            });\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        // let index = 0;\r\n        // let result;\r\n        // if (index < (this.state.data.student_responses).length - 1) {\r\n        //     result = (\r\n        //         <div key={this.state.data.student_responses.id}>\r\n        //             <h3>Context: {this.state.data.student_responses[index]['context']}</h3>\r\n        //             <p>Question: {this.state.data.student_responses[index]['wuestion']}</p>\r\n        //             <p>Response: {this.state.data.student_responses[index]['response']}</p>\r\n        //             <p>Views: {this.state.data.student_responses[index]['views']}</p>\r\n        //         </div>\r\n        //     )\r\n        //     index += 1;\r\n        // }\r\n\r\n        return (\r\n            <div>\r\n                {this.state.data.map(item => (\r\n                    <div key={item.id}>\r\n                        <h1>Story: {item.story}</h1>\r\n                        <h3>Context: {item.student_responses[0]['context']}</h3>\r\n                        <p>Questions: {item.student_responses[0]['question']}</p>\r\n                        <p>Response: {item.student_responses[0]['response']}</p>\r\n                        <p>Views: {item.student_responses[0]['views']}</p>\r\n                    </div>\r\n                ))};\r\n                {/*result*/}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default InstructorPage;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Route, Link, BrowserRouter as Router } from 'react-router-dom';\r\n\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nimport Study from './App';\r\nimport InstructorPage from './instructor_data_view';\r\n\r\n// note(ra): for sanity testing of django-webpack-loader...\r\n// ReactDOM.render(<span>Hello, world!</span>, document.getElementById('root'));\r\n\r\nconst routing = (\r\n    <Router>\r\n        <div>\r\n            <Route path=\"/student\" component={Study} />\r\n            <Route path=\"/instructor\" component={InstructorPage} />\r\n        </div>\r\n    </Router>\r\n);\r\n\r\nReactDOM.render(routing,document.getElementById('root'));\r\n"],"sourceRoot":""}