(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{56:function(e,t,n){e.exports=n(93)},63:function(e,t,n){},90:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(23),o=n.n(r),l=n(52),i=n(15),u=(n(61),n(17)),c=n.n(u),m=n(24),d=n(27),h=n(25),p=n(26),v=n(20),E=n(21),f=(n(63),n(13)),y=n.n(f),b=n(32),k=n.n(b),w=n(22),_=n.n(w),x=n(51),S=n.n(x),g=n(12),C=n.n(g),q=function(){function e(){Object(v.a)(this,e),this.start=Date.now(),this.end=null,this.time=0}return Object(E.a)(e,[{key:"stop",value:function(){return this.end=Date.now(),this.time+=this.end-this.start,this.time/1e3}},{key:"resume",value:function(){this.start=Date.now()}}]),e}();function B(e){return s.a.createElement("div",{className:"question"},s.a.createElement("div",{className:"question-prompt"},e.question),s.a.createElement(C.a,{fixed:"bottom"},s.a.createElement(y.a,{variant:"primary",onClick:e.onClick,size:"lg",block:!0},"Continue")))}function O(e){return s.a.createElement("div",{className:"story"},s.a.createElement("div",{className:"story-box",onScroll:e.onScroll},s.a.createElement("div",{className:"story-text"},e.story)),s.a.createElement(C.a,{fixed:"bottom"},s.a.createElement(y.a,{variant:"primary",onClick:e.onClick,size:"lg",block:!0},"Continue")))}function N(e){return s.a.createElement("div",{className:"context"},s.a.createElement("div",{className:"context-text"},e.context),s.a.createElement(C.a,{fixed:"bottom"},s.a.createElement(y.a,{variant:"primary",onClick:e.onClick,size:"lg",block:!0},"Continue")))}function j(e){return s.a.createElement("div",{className:"response"},s.a.createElement(_.a,{onSubmit:e.onSubmit},s.a.createElement(_.a.Group,null,s.a.createElement(_.a.Label,null,e.question),s.a.createElement(_.a.Control,{type:"text",onChange:e.onChange,value:e.answer})),s.a.createElement(C.a,{fixed:"bottom"},s.a.createElement(k.a,{className:"multi-button",size:"lg"},s.a.createElement(y.a,{variant:"secondary",type:"submit"},"Submit"),s.a.createElement(y.a,{variant:"primary",onClick:e.goBack},"Go Back")))))}function D(e){return s.a.createElement("div",{className:"go-back"},s.a.createElement("div",null,"Would you like to see that again?"),s.a.createElement(C.a,{fixed:"bottom"},s.a.createElement(k.a,{className:"multi-button",size:"lg"},s.a.createElement(y.a,{variant:"secondary",onClick:e.continue},"No"),s.a.createElement(y.a,{variant:"primary",onClick:e.goBack},"Yes"))))}function J(e){return e.word_alert?s.a.createElement("div",{className:"word-alert"},s.a.createElement(S.a,{variant:"danger"},"Please make sure to enter a response and respect word limits")):null}var z=function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={story:null,contexts:[],questions:[],context_number:0,question_number:0,answers:[],finished:!1,textInput:"",views:"[]",show_story:!1,show_context:!1,show_question:!1,show_response:!1,show_go_back:!1,word_alert:!1,timer:null,scrollTop:0,scroll_ups:0,scrolling_up:!1},n}return Object(p.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(c.a.mark(function e(){var t,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,this.setState(n[0]),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"postData",value:function(){var e={story:this.state.story,student_responses:this.state.answers};console.log(JSON.stringify(e)),fetch("/api/add-response/",{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return console.log(JSON.stringify(e))}).catch(function(e){return console.log(e)})}},{key:"handleFormChange",value:function(e){this.setState({textInput:e.target.value})}},{key:"validateSubmission",value:function(e,t){return!!e&&e.trim().split(" ").length<=t}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.question_number,n=this.state.context_number,a=this.state.answers.slice(),s=this.state.textInput,r=this.state.views,o=this.state.questions[t].word_limit,l=this.state.finished,i=this.state.show_story,u=this.state.show_response,c=this.state.scroll_ups;if(this.validateSubmission(s,o)){var m={context:this.state.contexts[n],question:this.state.questions[t].text,response:s,views:r,scroll_ups:c};a.push(m),r="[]";var d=new q;c=0,t<this.state.questions.length-1?t+=1:n<this.state.contexts.length-1?(n+=1,t=0,i=!0):(l=!0,i=!1,u=!1),this.setState({question_number:t,context_number:n,answers:a,finished:l,textInput:"",show_story:i,show_response:u,views:r,word_alert:!1,timer:d,scroll_ups:c})}else this.setState({word_alert:!0})}},{key:"handleStartClick",value:function(){var e=new q;this.setState({show_story:!0,timer:e})}},{key:"storyButtonClick",value:function(){var e=JSON.parse(this.state.views),t=this.state.timer.stop();e.push(t);var n=JSON.stringify(e);this.setState({show_story:!1,show_context:!0,views:n})}},{key:"contextButtonClick",value:function(){this.setState({show_context:!1,show_question:!0})}},{key:"questionButtonClick",value:function(){this.setState({show_question:!1,show_go_back:!0})}},{key:"backButtonClick",value:function(){var e=new q;this.setState({show_go_back:!1,show_story:!0,show_response:!1,timer:e})}},{key:"continueButtonClick",value:function(){this.setState({show_go_back:!1,show_response:!0})}},{key:"handleStoryScroll",value:function(e){var t=e.target.scrollTop,n=this.state.scrollTop,a=this.state.scroll_ups,s=this.state.scrolling_up;t<n&&!s?(a++,s=!0):t>n&&s&&(s=!1),this.setState({scrollTop:t,scroll_ups:a,scrolling_up:s})}},{key:"render",value:function(){var e,t=this;return this.state.story?this.state.show_story?e=s.a.createElement(O,{story:this.state.story,onClick:function(){return t.storyButtonClick()},onScroll:function(e){return t.handleStoryScroll(e)}}):this.state.show_context?e=s.a.createElement(N,{context:this.state.contexts[this.state.context_number],onClick:function(){return t.contextButtonClick()}}):this.state.show_go_back?e=s.a.createElement(D,{goBack:function(){return t.backButtonClick()},continue:function(){return t.continueButtonClick()}}):this.state.show_question?e=s.a.createElement(B,{question:this.state.questions[this.state.question_number].text,onClick:function(){return t.questionButtonClick()}}):this.state.show_response?e=s.a.createElement("div",null,s.a.createElement(J,{word_alert:this.state.word_alert}),s.a.createElement(j,{onSubmit:function(e){return t.handleSubmit(e)},onChange:function(e){return t.handleFormChange(e)},question:this.state.questions[this.state.question_number].text,answer:this.state.textInput,goBack:function(){return t.backButtonClick()}})):this.state.finished?(this.postData(),e=s.a.createElement("div",{className:"finished"},"Thank you for your time!")):e=s.a.createElement("div",{className:"start"},s.a.createElement("div",null,"Are you ready?"),s.a.createElement(C.a,{fixed:"bottom"},s.a.createElement(y.a,{variant:"primary",onClick:function(){return t.handleStartClick()},size:"lg",block:!0},"Start!"))):e=null,e}}]),t}(s.a.Component),I=n(55),T=n(19),P=(n(90),n(33)),L=n.n(P);function Q(e){var t=e.student_responses.map(function(e){return s.a.createElement(F,{response:e,key:e.id})});return s.a.createElement("div",{className:"student"},s.a.createElement("div",null,s.a.createElement("center",null,s.a.createElement("h1",null,"Student #",e.id))),s.a.createElement("div",null,s.a.createElement("h5",null,s.a.createElement("b",null,"Story: ")," ",e.story)),s.a.createElement(L.a,{striped:!0,bordered:!0,hover:!0,responsive:!0},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("b",null,"Context")),s.a.createElement("td",null,s.a.createElement("b",null,"Question")),s.a.createElement("td",null,s.a.createElement("b",null,"Response")),s.a.createElement("td",null,s.a.createElement("b",null,"Views")),s.a.createElement("td",null,s.a.createElement("b",null,"Scrolls")))),s.a.createElement("tbody",null,t)))}function F(e){var t=e.response;return s.a.createElement("tr",null,s.a.createElement("td",null,t.context),s.a.createElement("td",null,t.question),s.a.createElement("td",null,t.response),s.a.createElement("td",null,t.views),s.a.createElement("td",null,t.scroll_ups))}function G(e){for(var t=e.students,n={},a=0;a<t.length;a++){var r=t[a];for(var o in r.student_responses){var l=r.student_responses[o].question,i=r.student_responses[o].context;n.hasOwnProperty(i)?n[i].hasOwnProperty(l)?n[i][l].push([a,o]):n[i][l]=[[a,o]]:(n[i]={},n[i][l]=[[a,o]])}}var u=[];for(var c in n)for(var m in n[c])u.push(s.a.createElement(M,{context:c,question:m,indices:n[c][m],students:t,key:c}));return s.a.createElement("div",{className:"question-view"},u)}function M(e){var t=e.indices.map(function(t){return s.a.createElement(R,{student:e.students[t[0]],prompt:t[1],key:t[0]})});return s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("h2",null,"Context: ",e.context)),s.a.createElement("div",null,s.a.createElement("h2",null,"Question: ",e.question)),s.a.createElement(L.a,{striped:!0,bordered:!0,hover:!0,responsive:!0},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("b",null,"Student")),s.a.createElement("td",null,s.a.createElement("b",null,"Response")),s.a.createElement("td",null,s.a.createElement("b",null,"Views")),s.a.createElement("td",null,s.a.createElement("b",null,"Scrolls")))),s.a.createElement("tbody",null,t)))}function R(e){return s.a.createElement("tr",null,s.a.createElement("td",null,e.student.id),s.a.createElement("td",null,e.student.student_responses[e.prompt].response),s.a.createElement("td",null,e.student.student_responses[e.prompt].views),s.a.createElement("td",null,e.student.student_responses[e.prompt].scroll_ups))}var V=function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={students:[],loaded:!1,sortBy:"student"},n.handleChange=n.handleChange.bind(Object(T.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(T.a)(n)),n}return Object(p.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(c.a.mark(function e(){var t,n,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/add-response/");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,a=this.state.sortBy,this.setState({students:n,loaded:!0,sortBy:a}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}},e,this,[[0,11]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(e){var t=this.state.students,n=this.state.loaded;this.setState({students:t,loaded:n,sortBy:e.target.value})}},{key:"handleChange",value:function(e){var t=this.state.students,n=this.state.loaded;this.setState({students:t,loaded:n,sortBy:e.target.value})}},{key:"render",value:function(){if(this.state.loaded){var e,t=Object(I.a)(this.state.students);return"story"===this.state.sortBy?(t.sort(function(e,t){return e.story.toLowerCase()>t.story.toLowerCase()?1:-1}),e=t.map(function(e){return s.a.createElement(Q,{story:e.story,student_responses:e.student_responses,id:e.id,key:e.id})})):e="question"===this.state.sortBy?s.a.createElement(G,{students:t}):t.map(function(e){return s.a.createElement(Q,{story:e.story,student_responses:e.student_responses,id:e.id,key:e.id})}),s.a.createElement("div",null,s.a.createElement(C.a,{fixed:"top"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("label",null,"Sort by",s.a.createElement("select",{value:this.state.sortBy,onChange:this.handleChange},s.a.createElement("option",{value:"student"},"Student"),s.a.createElement("option",{value:"story"},"Story"),s.a.createElement("option",{value:"question"},"Question"))))),s.a.createElement("div",null,e))}return null}}]),t}(s.a.Component),A=s.a.createElement(l.a,null,s.a.createElement("div",null,s.a.createElement(i.a,{path:"/student",component:z}),s.a.createElement(i.a,{path:"/instructor",component:V})));o.a.render(A,document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.064401c1.chunk.js.map