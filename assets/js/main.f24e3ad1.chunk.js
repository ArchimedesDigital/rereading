(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{53:function(e,t,n){e.exports=n(90)},60:function(e,t,n){},87:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(18),o=n.n(r),i=n(50),l=n(13),c=(n(58),n(15)),u=n.n(c),m=n(19),d=n(20),h=n(21),v=n(23),p=n(22),f=n(24),E=(n(60),n(17)),y=n.n(E),b=n(47),w=n.n(b),x=n(48),k=n.n(x),g=n(25),S=n.n(g);function _(e){return s.a.createElement("div",{className:"question"},s.a.createElement("div",{className:"question-prompt"},e.question),s.a.createElement("form",{onSubmit:e.onSubmit},s.a.createElement("label",null,s.a.createElement(w.a.Control,{type:"text",value:e.answer,onChange:e.onChange})),s.a.createElement(S.a,{fixed:"bottom"},s.a.createElement(y.a,{variant:"secondary",onClick:e.goBack,size:"lg",block:!0},"Go back to story"),s.a.createElement(y.a,{variant:"primary",type:"submit",size:"lg",block:!0},"Continue"))))}function C(e){return s.a.createElement("div",{className:"story"},s.a.createElement("div",{className:"context-text"},e.context),s.a.createElement("div",{className:"story-text"},e.story),s.a.createElement(S.a,{fixed:"bottom"},s.a.createElement(y.a,{variant:"secondary",onClick:e.onClick,size:"lg",block:!0},"Continue")))}function j(e){return e.word_alert?s.a.createElement("div",{className:"word-alert"},s.a.createElement(k.a,{variant:"danger"},"Please make sure to enter a response and respect word limits")):null}var O=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(v.a)(this,Object(p.a)(t).call(this,e))).state={story:null,contexts:[],questions:[],context_number:0,question_number:0,answers:[],finished:!1,start:!0,textInput:"",views:1,show_story:!0,word_alert:!1},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,this.setState(n[0]),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"postData",value:function(){var e={story:this.state.story,student_responses:this.state.answers};console.log(JSON.stringify(e)),fetch("/api/add-response/",{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return console.log(JSON.stringify(e))}).catch(function(e){return console.log(e)})}},{key:"handleFormChange",value:function(e){this.setState({textInput:e.target.value})}},{key:"validateSubmission",value:function(e,t){return!!e&&e.trim().split(" ").length<=t}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.question_number,n=this.state.context_number,a=this.state.answers.slice(),s=this.state.textInput,r=this.state.views,o=this.state.questions[t].word_limit,i=this.state.finished,l=this.state.show_story;if(this.validateSubmission(s,o)){var c={context:this.state.contexts[n],question:this.state.questions[t].text,response:s,views:r};a.push(c),r=1,t<this.state.questions.length-1?t+=1:n<this.state.contexts.length-1?(n+=1,t=0,l=!0):i=!0,this.setState({question_number:t,context_number:n,answers:a,finished:i,textInput:"",show_story:l,views:r,word_alert:!1})}else this.setState({word_alert:!0})}},{key:"handleStartClick",value:function(){this.setState({start:!1})}},{key:"toggleStory",value:function(){var e=!this.state.show_story,t=this.state.views;e&&t++,this.setState({show_story:e,views:t})}},{key:"render",value:function(){var e,t=this;return this.state.story?this.state.start?e=s.a.createElement("div",{className:"start"},s.a.createElement("div",null,"Are you ready?"),s.a.createElement(S.a,{fixed:"bottom"},s.a.createElement(y.a,{variant:"secondary",onClick:function(){return t.handleStartClick()},size:"lg",block:!0},"Start!"))):this.state.finished?(this.postData(),e=s.a.createElement("div",{className:"finished"},"Thank you for your time!")):e=this.state.show_story?s.a.createElement(C,{story:this.state.story,context:this.state.contexts[this.state.context_number],onClick:function(){return t.toggleStory()}}):s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement(j,{word_alert:this.state.word_alert})),s.a.createElement("div",null,s.a.createElement(_,{story:this.state.story,context:this.state.contexts[this.state.context_number],question:this.state.questions[this.state.question_number].text,onChange:function(e){return t.handleFormChange(e)},onSubmit:function(e){return t.handleSubmit(e)},answer:this.state.textInput,goBack:function(){return t.toggleStory()}}))):e=null,e}}]),t}(s.a.Component),q=(n(87),n(49)),N=n.n(q);function I(e){var t=e.student_responses.map(function(e){return s.a.createElement(D,{response:e,key:e.id})});return s.a.createElement("div",{className:"student"},s.a.createElement("div",null,s.a.createElement("center",null,s.a.createElement("h1",null,"Student #",e.id))),s.a.createElement("div",null,s.a.createElement("h5",null,s.a.createElement("b",null,"Story: ")," ",e.story)),s.a.createElement(N.a,{striped:!0,bordered:!0,hover:!0,responsive:!0},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("b",null,"Context")),s.a.createElement("td",null,s.a.createElement("b",null,"Question")),s.a.createElement("td",null,s.a.createElement("b",null,"Response")),s.a.createElement("td",null,s.a.createElement("b",null,"Views")))),s.a.createElement("tbody",null,t)))}function D(e){var t=e.response;return s.a.createElement("tr",null,s.a.createElement("td",null,t.context),s.a.createElement("td",null,t.question),s.a.createElement("td",null,t.response),s.a.createElement("td",null,t.views))}var J=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(v.a)(this,Object(p.a)(t).call(this,e))).state={students:[],loaded:!1},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/add-response/");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,this.setState({students:n,loaded:!0}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loaded?this.state.students.map(function(e){return s.a.createElement(I,{story:e.story,student_responses:e.student_responses,id:e.id,key:e.id})}):null}}]),t}(s.a.Component),z=s.a.createElement(i.a,null,s.a.createElement("div",null,s.a.createElement(l.a,{path:"/student",component:O}),s.a.createElement(l.a,{path:"/instructor",component:J})));o.a.render(z,document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.f24e3ad1.chunk.js.map